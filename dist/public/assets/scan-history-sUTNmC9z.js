import{j as e,L as c,B as n,S as j}from"./index-BjO4OBGt.js";import{u as g,C as f}from"./calendar-BSGqHjwE.js";import{C as t,c as a,a as p,b as N}from"./card-DW_tR_lU.js";import{C as v}from"./chart-column-78LhE8Zo.js";import{T as b}from"./trending-up-B40RNYrB.js";import{A as S}from"./activity-CyljwJYx.js";import{S as i}from"./store-Dk2pWrXh.js";import{A as w}from"./arrow-left-PafVpdP1.js";import"./utils-km2FGkQ4.js";function $(){const{data:d=[],isLoading:m}=g({queryKey:["/api/scans"]}),o=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),x=s=>{switch(s){case"completed":return"text-accent";case"running":return"text-primary";case"failed":return"text-destructive";default:return"text-muted-foreground"}},u=s=>{switch(s){case"completed":return"fas fa-check-circle";case"running":return"fas fa-spinner fa-spin";case"failed":return"fas fa-exclamation-circle";default:return"fas fa-clock"}},r={totalScans:24,successRate:91.7,avgSavings:127.5,topStore:"Home Depot"};return e.jsx("div",{className:"page-layout",children:e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-6",children:"Scan History & Analytics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(t,{className:"panel",children:e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:e.jsx(v,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:r.totalScans}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Scans"})]})]})})}),e.jsx(t,{className:"panel",children:e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center",children:e.jsx(b,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-foreground",children:[r.successRate,"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Success Rate"})]})]})})}),e.jsx(t,{className:"panel",children:e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center",children:e.jsx(S,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-foreground",children:["$",r.avgSavings]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg. Savings"})]})]})})}),e.jsx(t,{className:"panel",children:e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-lg flex items-center justify-center",children:e.jsx(i,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:r.topStore}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Top Store"})]})]})})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(c,{href:"/",children:e.jsxs(n,{variant:"ghost",className:"mb-4","data-testid":"button-back-home",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Back to Scanner"]})}),e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Scan History"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"View and manage your previous clearance scans"})]}),m?e.jsx("div",{className:"grid gap-4",children:[...Array(5)].map((s,l)=>e.jsx(t,{className:"animate-pulse",children:e.jsxs(a,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})},l))}):d.length===0?e.jsx(t,{children:e.jsxs(a,{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(j,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No scans yet"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Start your first clearance scan to see results here."}),e.jsx(c,{href:"/",children:e.jsx(n,{"data-testid":"button-start-first-scan",children:"Start Your First Scan"})})]})}):e.jsx("div",{className:"grid gap-4",children:d.map(s=>{var l;return e.jsxs(t,{className:"hover:shadow-md transition-shadow",children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(N,{className:"text-lg flex items-center gap-2",children:[e.jsx(i,{className:"w-5 h-5"}),s.storeId.replace("-"," ").replace(/\b\w/g,h=>h.toUpperCase())]}),e.jsxs("div",{className:`flex items-center gap-2 ${x(s.status)}`,children:[e.jsx("i",{className:u(s.status)}),e.jsx("span",{className:"text-sm font-medium capitalize",children:s.status})]})]})}),e.jsxs(a,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Scan Date"}),e.jsxs("div",{className:"font-medium flex items-center gap-1",children:[e.jsx(f,{className:"w-4 h-4"}),o(s.createdAt)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Results Found"}),e.jsxs("div",{className:"font-medium",children:[s.resultCount," products"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Clearance Items"}),e.jsxs("div",{className:"font-medium text-accent",children:[s.clearanceCount," on sale"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-4",children:[e.jsxs("span",{children:["Store Coverage: ",s.storeCount," store",s.storeCount!=="1"?"s":""]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:s.productSelection==="all"?"All products":`${((l=s.specificSkus)==null?void 0:l.length)||0} specific SKUs`}),s.clearanceOnly&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{className:"text-accent",children:"Clearance only"})]})]}),s.status==="completed"&&e.jsx(c,{href:`/?scan=${s.id}`,children:e.jsx(n,{variant:"outline",size:"sm","data-testid":`button-view-results-${s.id}`,children:"View Results"})})]})]},s.id)})})]})})}export{$ as default};
