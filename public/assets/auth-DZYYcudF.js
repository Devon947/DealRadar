import{c as B,r as f,x as P,j as s,a0 as N,B as c,y as C,z as F,u as H,A as U}from"./index-BjO4OBGt.js";import{u as k,F as E,a as u,b as h,d as x,c as p,e as j,z as l,t as A}from"./index-DBTXEaT4.js";import{u as L}from"./useMutation-EJ4WbH_H.js";import{C as I,a as M,b as T,c as q}from"./card-DW_tR_lU.js";import{I as g}from"./input-CUaQRxLP.js";import{E as b,a as y}from"./eye-B9msfmQo.js";import{A as O}from"./arrow-left-PafVpdP1.js";import"./label-DoS8Orlk.js";import"./utils-km2FGkQ4.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=B("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),W=l.object({email:l.string().email("Please enter a valid email address"),password:l.string().min(6,"Password must be at least 6 characters")});function D({onSuccess:r,onSwitchToSignup:w}){const[t,d]=f.useState(!1),{toast:o}=P(),n=k({resolver:A(W),defaultValues:{email:"",password:""}}),m=L({mutationFn:async e=>(await C("POST","/api/auth/login",e)).json(),onSuccess:e=>{F.invalidateQueries({queryKey:["/api/auth/me"]}),o({title:"Welcome back!",description:"You've been successfully logged in."}),r()},onError:e=>{o({title:"Login Failed",description:e.message||"Invalid email or password.",variant:"destructive"})}}),i=e=>{m.mutate(e)};return s.jsxs(I,{className:"w-full max-w-md mx-auto",children:[s.jsx(M,{className:"text-center",children:s.jsxs(T,{className:"flex items-center justify-center gap-2",children:[s.jsx(N,{className:"w-5 h-5"}),"Welcome Back"]})}),s.jsxs(q,{children:[s.jsx(E,{...n,children:s.jsxs("form",{onSubmit:n.handleSubmit(i),className:"space-y-4",children:[s.jsx(u,{control:n.control,name:"email",render:({field:e})=>s.jsxs(h,{children:[s.jsx(x,{children:"Email"}),s.jsx(p,{children:s.jsx(g,{type:"email",placeholder:"Enter your email",...e,"data-testid":"input-email"})}),s.jsx(j,{})]})}),s.jsx(u,{control:n.control,name:"password",render:({field:e})=>s.jsxs(h,{children:[s.jsx(x,{children:"Password"}),s.jsx(p,{children:s.jsxs("div",{className:"relative",children:[s.jsx(g,{type:t?"text":"password",placeholder:"Enter your password",...e,"data-testid":"input-password"}),s.jsx(c,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>d(!t),"data-testid":"button-toggle-password",children:t?s.jsx(b,{className:"h-4 w-4"}):s.jsx(y,{className:"h-4 w-4"})})]})}),s.jsx(j,{})]})}),s.jsx(c,{type:"submit",className:"w-full",disabled:m.isPending,"data-testid":"button-login",children:m.isPending?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}),"Signing In..."]}):s.jsxs(s.Fragment,{children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"Sign In"]})})]})}),s.jsx("div",{className:"mt-4 text-center",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Don't have an account?"," ",s.jsx(c,{variant:"link",className:"p-0 h-auto font-semibold",onClick:w,"data-testid":"button-switch-signup",children:"Sign up here"})]})})]})]})}const K=l.object({username:l.string().min(2,"Username must be at least 2 characters"),email:l.string().email("Please enter a valid email address"),password:l.string().min(6,"Password must be at least 6 characters"),confirmPassword:l.string()}).refine(r=>r.password===r.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function Q({onSuccess:r,onSwitchToLogin:w}){const[t,d]=f.useState(!1),[o,n]=f.useState(!1),{toast:m}=P(),i=k({resolver:A(K),defaultValues:{username:"",email:"",password:"",confirmPassword:""}}),e=L({mutationFn:async a=>{const{confirmPassword:R,...z}=a;return(await C("POST","/api/auth/signup",z)).json()},onSuccess:a=>{F.invalidateQueries({queryKey:["/api/auth/me"]}),m({title:"Welcome!",description:"Your account has been created successfully."}),r()},onError:a=>{m({title:"Signup Failed",description:a.message||"Failed to create account. Please try again.",variant:"destructive"})}}),v=a=>{e.mutate(a)};return s.jsxs(I,{className:"w-full max-w-md mx-auto",children:[s.jsx(M,{className:"text-center",children:s.jsxs(T,{className:"flex items-center justify-center gap-2",children:[s.jsx(S,{className:"w-5 h-5"}),"Create Account"]})}),s.jsxs(q,{children:[s.jsx(E,{...i,children:s.jsxs("form",{onSubmit:i.handleSubmit(v),className:"space-y-4",children:[s.jsx(u,{control:i.control,name:"username",render:({field:a})=>s.jsxs(h,{children:[s.jsx(x,{children:"Username"}),s.jsx(p,{children:s.jsx(g,{placeholder:"Enter your username",...a,"data-testid":"input-username"})}),s.jsx(j,{})]})}),s.jsx(u,{control:i.control,name:"email",render:({field:a})=>s.jsxs(h,{children:[s.jsx(x,{children:"Email"}),s.jsx(p,{children:s.jsx(g,{type:"email",placeholder:"Enter your email",...a,"data-testid":"input-email"})}),s.jsx(j,{})]})}),s.jsx(u,{control:i.control,name:"password",render:({field:a})=>s.jsxs(h,{children:[s.jsx(x,{children:"Password"}),s.jsx(p,{children:s.jsxs("div",{className:"relative",children:[s.jsx(g,{type:t?"text":"password",placeholder:"Enter your password",...a,"data-testid":"input-password"}),s.jsx(c,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>d(!t),"data-testid":"button-toggle-password",children:t?s.jsx(b,{className:"h-4 w-4"}):s.jsx(y,{className:"h-4 w-4"})})]})}),s.jsx(j,{})]})}),s.jsx(u,{control:i.control,name:"confirmPassword",render:({field:a})=>s.jsxs(h,{children:[s.jsx(x,{children:"Confirm Password"}),s.jsx(p,{children:s.jsxs("div",{className:"relative",children:[s.jsx(g,{type:o?"text":"password",placeholder:"Confirm your password",...a,"data-testid":"input-confirm-password"}),s.jsx(c,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>n(!o),"data-testid":"button-toggle-confirm-password",children:o?s.jsx(b,{className:"h-4 w-4"}):s.jsx(y,{className:"h-4 w-4"})})]})}),s.jsx(j,{})]})}),s.jsx(c,{type:"submit",className:"w-full",disabled:e.isPending,"data-testid":"button-signup",children:e.isPending?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}),"Creating Account..."]}):s.jsxs(s.Fragment,{children:[s.jsx(S,{className:"w-4 h-4 mr-2"}),"Create Account"]})})]})}),s.jsx("div",{className:"mt-4 text-center",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Already have an account?"," ",s.jsx(c,{variant:"link",className:"p-0 h-auto font-semibold",onClick:w,"data-testid":"button-switch-login",children:"Sign in here"})]})})]})]})}function as(){const[r,w]=f.useState("login"),[,t]=H(),d=()=>{t("/")},o=()=>{t("/")},n=()=>{w(r==="login"?"signup":"login")};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(U,{}),s.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs(c,{variant:"ghost",onClick:o,className:"mb-6","data-testid":"button-back",children:[s.jsx(O,{className:"w-4 h-4 mr-2"}),"Back to Home"]}),s.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:r==="login"?s.jsx(D,{onSuccess:d,onSwitchToSignup:n}):s.jsx(Q,{onSuccess:d,onSwitchToLogin:n})})]})]})}export{as as default};
