var Hi=Object.defineProperty;var Yi=(t,e,s)=>e in t?Hi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var n=(t,e,s)=>Yi(t,typeof e!="symbol"?e+"":e,s);import{r as nn,j as o,l as Zi,x as ki,A as ea,B as de,U as ta,y as sa}from"./index-BjO4OBGt.js";import{z as h,u as ra,t as na,F as ia,a as $,b as O,d as G,c as X,e as K}from"./index-DBTXEaT4.js";import{u as aa}from"./useMutation-EJ4WbH_H.js";import{C as Z,a as k,b as ee,d as oa,c as te}from"./card-DW_tR_lU.js";import{I as se}from"./input-CUaQRxLP.js";import{M as me}from"./message-square-dja8zecE.js";import{S as pe}from"./send-CTMMWVNd.js";import{M as ge}from"./mail-CXCLBIlh.js";import{P as la}from"./phone-i59DFYp6.js";import"./label-DoS8Orlk.js";import"./utils-km2FGkQ4.js";const an=nn.forwardRef(({className:t,...e},s)=>o.jsx("textarea",{className:Zi("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...e}));an.displayName="Textarea";const i=Symbol.for("drizzle:entityKind");function _(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,i))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let s=Object.getPrototypeOf(t).constructor;if(s)for(;s;){if(i in s&&s[i]===e[i])return!0;s=Object.getPrototypeOf(s)}return!1}var Pe;Pe=i;class q{constructor(e,s){n(this,"name");n(this,"keyAsName");n(this,"primary");n(this,"notNull");n(this,"default");n(this,"defaultFn");n(this,"onUpdateFn");n(this,"hasDefault");n(this,"isUnique");n(this,"uniqueName");n(this,"uniqueType");n(this,"dataType");n(this,"columnType");n(this,"enumValues");n(this,"generated");n(this,"generatedIdentity");n(this,"config");this.table=e,this.config=s,this.name=s.name,this.keyAsName=s.keyAsName,this.notNull=s.notNull,this.default=s.default,this.defaultFn=s.defaultFn,this.onUpdateFn=s.onUpdateFn,this.hasDefault=s.hasDefault,this.primary=s.primaryKey,this.isUnique=s.isUnique,this.uniqueName=s.uniqueName,this.uniqueType=s.uniqueType,this.dataType=s.dataType,this.columnType=s.columnType,this.generated=s.generated,this.generatedIdentity=s.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}n(q,Pe,"Column");var Te;Te=i;class on{constructor(e,s,r){n(this,"config");n(this,"$default",this.$defaultFn);n(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:s,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}n(on,Te,"ColumnBuilder");const z=Symbol.for("drizzle:Name");var we;we=i;class ln{constructor(e,s){n(this,"reference");n(this,"_onUpdate","no action");n(this,"_onDelete","no action");this.reference=()=>{const{name:r,columns:a,foreignColumns:l}=e();return{name:r,columns:a,foreignTable:l[0].table,foreignColumns:l}},s&&(this._onUpdate=s.onUpdate,this._onDelete=s.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new un(e,this)}}n(ln,we,"PgForeignKeyBuilder");var Ie;Ie=i;class un{constructor(e,s){n(this,"reference");n(this,"onUpdate");n(this,"onDelete");this.table=e,this.reference=s.reference,this.onUpdate=s._onUpdate,this.onDelete=s._onDelete}getName(){const{name:e,columns:s,foreignColumns:r}=this.reference(),a=s.map(g=>g.name),l=r.map(g=>g.name),c=[this.table[z],...a,r[0].table[z],...l];return e??`${c.join("_")}_fk`}}n(un,Ie,"PgForeignKey");function ua(t,...e){return t(...e)}function ca(t,e){return`${t[z]}_${e.join("_")}_unique`}function fe(t,e,s){for(let r=e;r<t.length;r++){const a=t[r];if(a==="\\"){r++;continue}if(a==='"')return[t.slice(e,r).replace(/\\/g,""),r+1];if(!s&&(a===","||a==="}"))return[t.slice(e,r).replace(/\\/g,""),r]}return[t.slice(e).replace(/\\/g,""),t.length]}function cn(t,e=0){const s=[];let r=e,a=!1;for(;r<t.length;){const l=t[r];if(l===","){(a||r===e)&&s.push(""),a=!0,r++;continue}if(a=!1,l==="\\"){r+=2;continue}if(l==='"'){const[f,b]=fe(t,r+1,!0);s.push(f),r=b;continue}if(l==="}")return[s,r+1];if(l==="{"){const[f,b]=cn(t,r+1);s.push(f),r=b;continue}const[c,g]=fe(t,r,!1);s.push(c),r=g}return[s,r]}function da(t){const[e]=cn(t,1);return e}function dn(t){return`{${t.map(e=>Array.isArray(e)?dn(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var _e,je;class p extends(je=on,_e=i,je){constructor(){super(...arguments);n(this,"foreignKeyConfigs",[])}array(s){return new pn(this.config.name,this,s)}references(s,r={}){return this.foreignKeyConfigs.push({ref:s,actions:r}),this}unique(s,r){return this.config.isUnique=!0,this.config.uniqueName=s,this.config.uniqueType=r==null?void 0:r.nulls,this}generatedAlwaysAs(s){return this.config.generated={as:s,type:"always",mode:"stored"},this}buildForeignKeys(s,r){return this.foreignKeyConfigs.map(({ref:a,actions:l})=>ua((c,g)=>{const f=new ln(()=>{const b=c();return{columns:[s],foreignColumns:[b]}});return g.onUpdate&&f.onUpdate(g.onUpdate),g.onDelete&&f.onDelete(g.onDelete),f.build(r)},a,l))}buildExtraConfigColumn(s){return new mn(s,this.config)}}n(p,_e,"PgColumnBuilder");var Ce,De;class m extends(De=q,Ce=i,De){constructor(e,s){s.uniqueName||(s.uniqueName=ca(e,[s.name])),super(e,s),this.table=e}}n(m,Ce,"PgColumn");var ve,Ae;class mn extends(Ae=m,ve=i,Ae){constructor(){super(...arguments);n(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});n(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(s){return this.indexConfig.opClass=s,this}}n(mn,ve,"ExtraConfigColumn");var Fe,Be;class pn extends(Be=p,Fe=i,Be){constructor(e,s,r){super(e,"array","PgArray"),this.config.baseBuilder=s,this.config.size=r}build(e){const s=this.config.baseBuilder.build(e);return new ae(e,this.config,s)}}n(pn,Fe,"PgArrayBuilder");var Ve,ze;const Y=class Y extends(ze=m,Ve=i,ze){constructor(s,r,a,l){super(s,r);n(this,"size");this.baseColumn=a,this.range=l,this.size=r.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(s){return typeof s=="string"&&(s=da(s)),s.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(s,r=!1){const a=s.map(l=>l===null?null:_(this.baseColumn,Y)?this.baseColumn.mapToDriverValue(l,!0):this.baseColumn.mapToDriverValue(l));return r?a:dn(a)}};n(Y,Ve,"PgArray");let ae=Y;const he=Symbol.for("drizzle:isPgEnum");function ma(t){return!!t&&typeof t=="function"&&he in t&&t[he]===!0}var Me;Me=i;class ue{constructor(e,s,r,a=!1){this._={brand:"Subquery",sql:e,selectedFields:s,alias:r,isWith:a}}}n(ue,Me,"Subquery");const pa={startActiveSpan(t,e){return e()}},M=Symbol.for("drizzle:ViewBaseConfig"),re=Symbol.for("drizzle:Schema"),ye=Symbol.for("drizzle:Columns"),be=Symbol.for("drizzle:ExtraConfigColumns"),ne=Symbol.for("drizzle:OriginalName"),ie=Symbol.for("drizzle:BaseName"),R=Symbol.for("drizzle:IsAlias"),xe=Symbol.for("drizzle:ExtraConfigBuilder"),gn=Symbol.for("drizzle:IsDrizzleTable");var qe,Le,Qe,Ue,Ee,$e,Oe,Ge,Xe,Ke;Ke=i,Xe=z,Ge=ne,Oe=re,$e=ye,Ee=be,Ue=ie,Qe=R,Le=gn,qe=xe;class j{constructor(e,s,r){n(this,Xe);n(this,Ge);n(this,Oe);n(this,$e);n(this,Ee);n(this,Ue);n(this,Qe,!1);n(this,Le,!0);n(this,qe);this[z]=this[ne]=e,this[re]=s,this[ie]=r}}n(j,Ke,"Table"),n(j,"Symbol",{Name:z,Schema:re,OriginalName:ne,Columns:ye,ExtraConfigColumns:be,BaseName:ie,IsAlias:R,ExtraConfigBuilder:xe});function fn(t){return typeof t=="object"&&t!==null&&gn in t}function ga(t){return t!=null&&typeof t.getSQL=="function"}function fa(t){var s;const e={sql:"",params:[]};for(const r of t)e.sql+=r.sql,e.params.push(...r.params),(s=r.typings)!=null&&s.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}var Re;Re=i;class D{constructor(e){n(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new T([this])}}n(D,Re,"StringChunk");var We;We=i;const V=class V{constructor(e){n(this,"decoder",hn);n(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return pa.startActiveSpan("drizzle.buildSQL",s=>{const r=this.buildQueryFromSourceParams(this.queryChunks,e);return s==null||s.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,s){const r=Object.assign({},s,{inlineParams:s.inlineParams||this.shouldInlineParams,paramStartIndex:s.paramStartIndex||{value:0}}),{casing:a,escapeName:l,escapeParam:c,prepareTyping:g,inlineParams:f,paramStartIndex:b}=r;return fa(e.map(u=>{var v;if(_(u,D))return{sql:u.value.join(""),params:[]};if(_(u,W))return{sql:l(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){const y=[new D("(")];for(const[w,Ji]of u.entries())y.push(Ji),w<u.length-1&&y.push(new D(", "));return y.push(new D(")")),this.buildQueryFromSourceParams(y,r)}if(_(u,V))return this.buildQueryFromSourceParams(u.queryChunks,{...r,inlineParams:f||u.shouldInlineParams});if(_(u,j)){const y=u[j.Symbol.Schema],w=u[j.Symbol.Name];return{sql:y===void 0||u[R]?l(w):l(y)+"."+l(w),params:[]}}if(_(u,q)){const y=a.getColumnCasing(u);if(s.invokeSource==="indexes")return{sql:l(y),params:[]};const w=u.table[j.Symbol.Schema];return{sql:u.table[R]||w===void 0?l(u.table[j.Symbol.Name])+"."+l(y):l(w)+"."+l(u.table[j.Symbol.Name])+"."+l(y),params:[]}}if(_(u,xn)){const y=u[M].schema,w=u[M].name;return{sql:y===void 0||u[M].isAlias?l(w):l(y)+"."+l(w),params:[]}}if(_(u,ce)){if(_(u.value,J))return{sql:c(b.value++,u),params:[u],typings:["none"]};const y=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(_(y,V))return this.buildQueryFromSourceParams([y],r);if(f)return{sql:this.mapInlineParam(y,r),params:[]};let w=["none"];return g&&(w=[g(u.encoder)]),{sql:c(b.value++,y),params:[y],typings:w}}return _(u,J)?{sql:c(b.value++,u),params:[u],typings:["none"]}:_(u,V.Aliased)&&u.fieldAlias!==void 0?{sql:l(u.fieldAlias),params:[]}:_(u,ue)?u._.isWith?{sql:l(u._.alias),params:[]}:this.buildQueryFromSourceParams([new D("("),u._.sql,new D(") "),new W(u._.alias)],r):ma(u)?u.schema?{sql:l(u.schema)+"."+l(u.enumName),params:[]}:{sql:l(u.enumName),params:[]}:ga(u)?(v=u.shouldOmitSQLParens)!=null&&v.call(u)?this.buildQueryFromSourceParams([u.getSQL()],r):this.buildQueryFromSourceParams([new D("("),u.getSQL(),new D(")")],r):f?{sql:this.mapInlineParam(u,r),params:[]}:{sql:c(b.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(e,{escapeString:s}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return s(e);if(typeof e=="object"){const r=e.toString();return s(r==="[object Object]"?JSON.stringify(e):r)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new V.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};n(V,We,"SQL");let T=V;var Je;Je=i;class W{constructor(e){n(this,"brand");this.value=e}getSQL(){return new T([this])}}n(W,Je,"Name");const hn={mapFromDriverValue:t=>t},yn={mapToDriverValue:t=>t};({...hn,...yn});var He;He=i;class ce{constructor(e,s=yn){n(this,"brand");this.value=e,this.encoder=s}getSQL(){return new T([this])}}n(ce,He,"Param");function P(t,...e){const s=[];(e.length>0||t.length>0&&t[0]!=="")&&s.push(new D(t[0]));for(const[r,a]of e.entries())s.push(a,new D(t[r+1]));return new T(s)}(t=>{function e(){return new T([])}t.empty=e;function s(f){return new T(f)}t.fromList=s;function r(f){return new T([new D(f)])}t.raw=r;function a(f,b){const u=[];for(const[v,y]of f.entries())v>0&&b!==void 0&&u.push(b),u.push(y);return new T(u)}t.join=a;function l(f){return new W(f)}t.identifier=l;function c(f){return new J(f)}t.placeholder=c;function g(f,b){return new ce(f,b)}t.param=g})(P||(P={}));(t=>{var s;s=i;const r=class r{constructor(l,c){n(this,"isSelectionField",!1);this.sql=l,this.fieldAlias=c}getSQL(){return this.sql}clone(){return new r(this.sql,this.fieldAlias)}};n(r,s,"SQL.Aliased");let e=r;t.Aliased=e})(T||(T={}));var Ye;Ye=i;class J{constructor(e){this.name=e}getSQL(){return new T([this])}}n(J,Ye,"Placeholder");const bn=Symbol.for("drizzle:IsDrizzleView");var Ze,ke,et;et=i,ke=M,Ze=bn;class xn{constructor({name:e,schema:s,selectedFields:r,query:a}){n(this,ke);n(this,Ze,!0);this[M]={name:e,originalName:e,schema:s,selectedFields:r,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new T([this])}}n(xn,et,"View");function ha(t){return typeof t=="object"&&t!==null&&bn in t}q.prototype.getSQL=function(){return new T([this])};j.prototype.getSQL=function(){return new T([this])};ue.prototype.getSQL=function(){return new T([this])};function ya(t){return t[j.Symbol.Columns]}function ba(t){return t[M].selectedFields}function I(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var tt,st;class E extends(st=p,tt=i,st){generatedAlwaysAsIdentity(e){if(e){const{name:s,...r}=e;this.config.generatedIdentity={type:"always",sequenceName:s,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:s,...r}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:s,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}n(E,tt,"PgIntColumnBaseBuilder");var rt,nt;class Nn extends(nt=E,rt=i,nt){constructor(e){super(e,"number","PgBigInt53")}build(e){return new Sn(e,this.config)}}n(Nn,rt,"PgBigInt53Builder");var it,at;class Sn extends(at=m,it=i,at){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}n(Sn,it,"PgBigInt53");var ot,lt;class Pn extends(lt=E,ot=i,lt){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Tn(e,this.config)}}n(Pn,ot,"PgBigInt64Builder");var ut,ct;class Tn extends(ct=m,ut=i,ct){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}n(Tn,ut,"PgBigInt64");function xa(t,e){const{name:s,config:r}=I(t,e);return r.mode==="number"?new Nn(s):new Pn(s)}var dt,mt;class wn extends(mt=p,dt=i,mt){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new In(e,this.config)}}n(wn,dt,"PgBigSerial53Builder");var pt,gt;class In extends(gt=m,pt=i,gt){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}n(In,pt,"PgBigSerial53");var ft,ht;class _n extends(ht=p,ft=i,ht){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new jn(e,this.config)}}n(_n,ft,"PgBigSerial64Builder");var yt,bt;class jn extends(bt=m,yt=i,bt){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}n(jn,yt,"PgBigSerial64");function Na(t,e){const{name:s,config:r}=I(t,e);return r.mode==="number"?new wn(s):new _n(s)}var xt,Nt;class Cn extends(Nt=p,xt=i,Nt){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Dn(e,this.config)}}n(Cn,xt,"PgBooleanBuilder");var St,Pt;class Dn extends(Pt=m,St=i,Pt){getSQLType(){return"boolean"}}n(Dn,St,"PgBoolean");function C(t){return new Cn(t??"")}var Tt,wt;class vn extends(wt=p,Tt=i,wt){constructor(e,s){super(e,"string","PgChar"),this.config.length=s.length,this.config.enumValues=s.enum}build(e){return new An(e,this.config)}}n(vn,Tt,"PgCharBuilder");var It,_t;class An extends(_t=m,It=i,_t){constructor(){super(...arguments);n(this,"length",this.config.length);n(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}n(An,It,"PgChar");function Sa(t,e={}){const{name:s,config:r}=I(t,e);return new vn(s,r)}var jt,Ct;class Fn extends(Ct=p,jt=i,Ct){constructor(e){super(e,"string","PgCidr")}build(e){return new Bn(e,this.config)}}n(Fn,jt,"PgCidrBuilder");var Dt,vt;class Bn extends(vt=m,Dt=i,vt){getSQLType(){return"cidr"}}n(Bn,Dt,"PgCidr");function Pa(t){return new Fn(t??"")}var At,Ft;class Vn extends(Ft=p,At=i,Ft){constructor(e,s,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=s,this.config.customTypeParams=r}build(e){return new zn(e,this.config)}}n(Vn,At,"PgCustomColumnBuilder");var Bt,Vt;class zn extends(Vt=m,Bt=i,Vt){constructor(s,r){super(s,r);n(this,"sqlName");n(this,"mapTo");n(this,"mapFrom");this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(s){return typeof this.mapFrom=="function"?this.mapFrom(s):s}mapToDriverValue(s){return typeof this.mapTo=="function"?this.mapTo(s):s}}n(zn,Bt,"PgCustomColumn");function Ta(t){return(e,s)=>{const{name:r,config:a}=I(e,s);return new Vn(r,a,t)}}var zt,Mt;class L extends(Mt=p,zt=i,Mt){defaultNow(){return this.default(P`now()`)}}n(L,zt,"PgDateColumnBaseBuilder");var qt,Lt;class Mn extends(Lt=L,qt=i,Lt){constructor(e){super(e,"date","PgDate")}build(e){return new qn(e,this.config)}}n(Mn,qt,"PgDateBuilder");var Qt,Ut;class qn extends(Ut=m,Qt=i,Ut){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}n(qn,Qt,"PgDate");var Et,$t;class Ln extends($t=L,Et=i,$t){constructor(e){super(e,"string","PgDateString")}build(e){return new Qn(e,this.config)}}n(Ln,Et,"PgDateStringBuilder");var Ot,Gt;class Qn extends(Gt=m,Ot=i,Gt){getSQLType(){return"date"}}n(Qn,Ot,"PgDateString");function wa(t,e){const{name:s,config:r}=I(t,e);return(r==null?void 0:r.mode)==="date"?new Mn(s):new Ln(s)}var Xt,Kt;class Un extends(Kt=p,Xt=i,Kt){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new En(e,this.config)}}n(Un,Xt,"PgDoublePrecisionBuilder");var Rt,Wt;class En extends(Wt=m,Rt=i,Wt){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}n(En,Rt,"PgDoublePrecision");function Ia(t){return new Un(t??"")}var Jt,Ht;class $n extends(Ht=p,Jt=i,Ht){constructor(e){super(e,"string","PgInet")}build(e){return new On(e,this.config)}}n($n,Jt,"PgInetBuilder");var Yt,Zt;class On extends(Zt=m,Yt=i,Zt){getSQLType(){return"inet"}}n(On,Yt,"PgInet");function _a(t){return new $n(t??"")}var kt,es;class Gn extends(es=E,kt=i,es){constructor(e){super(e,"number","PgInteger")}build(e){return new Xn(e,this.config)}}n(Gn,kt,"PgIntegerBuilder");var ts,ss;class Xn extends(ss=m,ts=i,ss){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}n(Xn,ts,"PgInteger");function ja(t){return new Gn(t??"")}var rs,ns;class Kn extends(ns=p,rs=i,ns){constructor(e,s){super(e,"string","PgInterval"),this.config.intervalConfig=s}build(e){return new Rn(e,this.config)}}n(Kn,rs,"PgIntervalBuilder");var is,as;class Rn extends(as=m,is=i,as){constructor(){super(...arguments);n(this,"fields",this.config.intervalConfig.fields);n(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const s=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${s}${r}`}}n(Rn,is,"PgInterval");function Ca(t,e={}){const{name:s,config:r}=I(t,e);return new Kn(s,r)}var os,ls;class Wn extends(ls=p,os=i,ls){constructor(e){super(e,"json","PgJson")}build(e){return new Jn(e,this.config)}}n(Wn,os,"PgJsonBuilder");var us,cs;class Jn extends(cs=m,us=i,cs){constructor(e,s){super(e,s)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}n(Jn,us,"PgJson");function Da(t){return new Wn(t??"")}var ds,ms;class Hn extends(ms=p,ds=i,ms){constructor(e){super(e,"json","PgJsonb")}build(e){return new Yn(e,this.config)}}n(Hn,ds,"PgJsonbBuilder");var ps,gs;class Yn extends(gs=m,ps=i,gs){constructor(e,s){super(e,s)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}n(Yn,ps,"PgJsonb");function va(t){return new Hn(t??"")}var fs,hs;class Zn extends(hs=p,fs=i,hs){constructor(e){super(e,"array","PgLine")}build(e){return new kn(e,this.config)}}n(Zn,fs,"PgLineBuilder");var ys,bs;class kn extends(bs=m,ys=i,bs){getSQLType(){return"line"}mapFromDriverValue(e){const[s,r,a]=e.slice(1,-1).split(",");return[Number.parseFloat(s),Number.parseFloat(r),Number.parseFloat(a)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}n(kn,ys,"PgLine");var xs,Ns;class ei extends(Ns=p,xs=i,Ns){constructor(e){super(e,"json","PgLineABC")}build(e){return new ti(e,this.config)}}n(ei,xs,"PgLineABCBuilder");var Ss,Ps;class ti extends(Ps=m,Ss=i,Ps){getSQLType(){return"line"}mapFromDriverValue(e){const[s,r,a]=e.slice(1,-1).split(",");return{a:Number.parseFloat(s),b:Number.parseFloat(r),c:Number.parseFloat(a)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}n(ti,Ss,"PgLineABC");function Aa(t,e){const{name:s,config:r}=I(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new Zn(s):new ei(s)}var Ts,ws;class si extends(ws=p,Ts=i,ws){constructor(e){super(e,"string","PgMacaddr")}build(e){return new ri(e,this.config)}}n(si,Ts,"PgMacaddrBuilder");var Is,_s;class ri extends(_s=m,Is=i,_s){getSQLType(){return"macaddr"}}n(ri,Is,"PgMacaddr");function Fa(t){return new si(t??"")}var js,Cs;class ni extends(Cs=p,js=i,Cs){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new ii(e,this.config)}}n(ni,js,"PgMacaddr8Builder");var Ds,vs;class ii extends(vs=m,Ds=i,vs){getSQLType(){return"macaddr8"}}n(ii,Ds,"PgMacaddr8");function Ba(t){return new ni(t??"")}var As,Fs;class ai extends(Fs=p,As=i,Fs){constructor(e,s,r){super(e,"string","PgNumeric"),this.config.precision=s,this.config.scale=r}build(e){return new oi(e,this.config)}}n(ai,As,"PgNumericBuilder");var Bs,Vs;class oi extends(Vs=m,Bs=i,Vs){constructor(s,r){super(s,r);n(this,"precision");n(this,"scale");this.precision=r.precision,this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}n(oi,Bs,"PgNumeric");function li(t,e){const{name:s,config:r}=I(t,e);return new ai(s,r==null?void 0:r.precision,r==null?void 0:r.scale)}const B=li;var zs,Ms;class ui extends(Ms=p,zs=i,Ms){constructor(e){super(e,"array","PgPointTuple")}build(e){return new ci(e,this.config)}}n(ui,zs,"PgPointTupleBuilder");var qs,Ls;class ci extends(Ls=m,qs=i,Ls){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[s,r]=e.slice(1,-1).split(",");return[Number.parseFloat(s),Number.parseFloat(r)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}n(ci,qs,"PgPointTuple");var Qs,Us;class di extends(Us=p,Qs=i,Us){constructor(e){super(e,"json","PgPointObject")}build(e){return new mi(e,this.config)}}n(di,Qs,"PgPointObjectBuilder");var Es,$s;class mi extends($s=m,Es=i,$s){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[s,r]=e.slice(1,-1).split(",");return{x:Number.parseFloat(s),y:Number.parseFloat(r)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}n(mi,Es,"PgPointObject");function Va(t,e){const{name:s,config:r}=I(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new ui(s):new di(s)}function za(t){const e=[];for(let s=0;s<t.length;s+=2)e.push(Number.parseInt(t.slice(s,s+2),16));return new Uint8Array(e)}function Ne(t,e){const s=new ArrayBuffer(8),r=new DataView(s);for(let a=0;a<8;a++)r.setUint8(a,t[e+a]);return r.getFloat64(0,!0)}function pi(t){const e=za(t);let s=0;const r=e[s];s+=1;const a=new DataView(e.buffer),l=a.getUint32(s,r===1);if(s+=4,l&536870912&&(a.getUint32(s,r===1),s+=4),(l&65535)===1){const c=Ne(e,s);s+=8;const g=Ne(e,s);return s+=8,[c,g]}throw new Error("Unsupported geometry type")}var Os,Gs;class gi extends(Gs=p,Os=i,Gs){constructor(e){super(e,"array","PgGeometry")}build(e){return new fi(e,this.config)}}n(gi,Os,"PgGeometryBuilder");var Xs,Ks;class fi extends(Ks=m,Xs=i,Ks){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return pi(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}n(fi,Xs,"PgGeometry");var Rs,Ws;class hi extends(Ws=p,Rs=i,Ws){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new yi(e,this.config)}}n(hi,Rs,"PgGeometryObjectBuilder");var Js,Hs;class yi extends(Hs=m,Js=i,Hs){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const s=pi(e);return{x:s[0],y:s[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}n(yi,Js,"PgGeometryObject");function Ma(t,e){const{name:s,config:r}=I(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new gi(s):new hi(s)}var Ys,Zs;class bi extends(Zs=p,Ys=i,Zs){constructor(e,s){super(e,"number","PgReal"),this.config.length=s}build(e){return new xi(e,this.config)}}n(bi,Ys,"PgRealBuilder");var ks,er;class xi extends(er=m,ks=i,er){constructor(s,r){super(s,r);n(this,"mapFromDriverValue",s=>typeof s=="string"?Number.parseFloat(s):s)}getSQLType(){return"real"}}n(xi,ks,"PgReal");function oe(t){return new bi(t??"")}var tr,sr;class Ni extends(sr=p,tr=i,sr){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Si(e,this.config)}}n(Ni,tr,"PgSerialBuilder");var rr,nr;class Si extends(nr=m,rr=i,nr){getSQLType(){return"serial"}}n(Si,rr,"PgSerial");function qa(t){return new Ni(t??"")}var ir,ar;class Pi extends(ar=E,ir=i,ar){constructor(e){super(e,"number","PgSmallInt")}build(e){return new Ti(e,this.config)}}n(Pi,ir,"PgSmallIntBuilder");var or,lr;class Ti extends(lr=m,or=i,lr){constructor(){super(...arguments);n(this,"mapFromDriverValue",s=>typeof s=="string"?Number(s):s)}getSQLType(){return"smallint"}}n(Ti,or,"PgSmallInt");function La(t){return new Pi(t??"")}var ur,cr;class wi extends(cr=p,ur=i,cr){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Ii(e,this.config)}}n(wi,ur,"PgSmallSerialBuilder");var dr,mr;class Ii extends(mr=m,dr=i,mr){getSQLType(){return"smallserial"}}n(Ii,dr,"PgSmallSerial");function Qa(t){return new wi(t??"")}var pr,gr;class _i extends(gr=p,pr=i,gr){constructor(e,s){super(e,"string","PgText"),this.config.enumValues=s.enum}build(e){return new ji(e,this.config)}}n(_i,pr,"PgTextBuilder");var fr,hr;class ji extends(hr=m,fr=i,hr){constructor(){super(...arguments);n(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}n(ji,fr,"PgText");function d(t,e={}){const{name:s,config:r}=I(t,e);return new _i(s,r)}var yr,br;class Ci extends(br=L,yr=i,br){constructor(e,s,r){super(e,"string","PgTime"),this.withTimezone=s,this.precision=r,this.config.withTimezone=s,this.config.precision=r}build(e){return new Di(e,this.config)}}n(Ci,yr,"PgTimeBuilder");var xr,Nr;class Di extends(Nr=m,xr=i,Nr){constructor(s,r){super(s,r);n(this,"withTimezone");n(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}n(Di,xr,"PgTime");function Ua(t,e={}){const{name:s,config:r}=I(t,e);return new Ci(s,r.withTimezone??!1,r.precision)}var Sr,Pr;class vi extends(Pr=L,Sr=i,Pr){constructor(e,s,r){super(e,"date","PgTimestamp"),this.config.withTimezone=s,this.config.precision=r}build(e){return new Ai(e,this.config)}}n(vi,Sr,"PgTimestampBuilder");var Tr,wr;class Ai extends(wr=m,Tr=i,wr){constructor(s,r){super(s,r);n(this,"withTimezone");n(this,"precision");n(this,"mapFromDriverValue",s=>new Date(this.withTimezone?s:s+"+0000"));n(this,"mapToDriverValue",s=>s.toISOString());this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}n(Ai,Tr,"PgTimestamp");var Ir,_r;class Fi extends(_r=L,Ir=i,_r){constructor(e,s,r){super(e,"string","PgTimestampString"),this.config.withTimezone=s,this.config.precision=r}build(e){return new Bi(e,this.config)}}n(Fi,Ir,"PgTimestampStringBuilder");var jr,Cr;class Bi extends(Cr=m,jr=i,Cr){constructor(s,r){super(s,r);n(this,"withTimezone");n(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}n(Bi,jr,"PgTimestampString");function A(t,e={}){const{name:s,config:r}=I(t,e);return(r==null?void 0:r.mode)==="string"?new Fi(s,r.withTimezone??!1,r.precision):new vi(s,(r==null?void 0:r.withTimezone)??!1,r==null?void 0:r.precision)}var Dr,vr;class Vi extends(vr=p,Dr=i,vr){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(P`gen_random_uuid()`)}build(e){return new zi(e,this.config)}}n(Vi,Dr,"PgUUIDBuilder");var Ar,Fr;class zi extends(Fr=m,Ar=i,Fr){getSQLType(){return"uuid"}}n(zi,Ar,"PgUUID");function Ea(t){return new Vi(t??"")}var Br,Vr;class Mi extends(Vr=p,Br=i,Vr){constructor(e,s){super(e,"string","PgVarchar"),this.config.length=s.length,this.config.enumValues=s.enum}build(e){return new qi(e,this.config)}}n(Mi,Br,"PgVarcharBuilder");var zr,Mr;class qi extends(Mr=m,zr=i,Mr){constructor(){super(...arguments);n(this,"length",this.config.length);n(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}n(qi,zr,"PgVarchar");function N(t,e={}){const{name:s,config:r}=I(t,e);return new Mi(s,r)}var qr,Lr;class Li extends(Lr=p,qr=i,Lr){constructor(e,s){super(e,"string","PgBinaryVector"),this.config.dimensions=s.dimensions}build(e){return new Qi(e,this.config)}}n(Li,qr,"PgBinaryVectorBuilder");var Qr,Ur;class Qi extends(Ur=m,Qr=i,Ur){constructor(){super(...arguments);n(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}n(Qi,Qr,"PgBinaryVector");function $a(t,e){const{name:s,config:r}=I(t,e);return new Li(s,r)}var Er,$r;class Ui extends($r=p,Er=i,$r){constructor(e,s){super(e,"array","PgHalfVector"),this.config.dimensions=s.dimensions}build(e){return new Ei(e,this.config)}}n(Ui,Er,"PgHalfVectorBuilder");var Or,Gr;class Ei extends(Gr=m,Or=i,Gr){constructor(){super(...arguments);n(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(s){return JSON.stringify(s)}mapFromDriverValue(s){return s.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}n(Ei,Or,"PgHalfVector");function Oa(t,e){const{name:s,config:r}=I(t,e);return new Ui(s,r)}var Xr,Kr;class $i extends(Kr=p,Xr=i,Kr){constructor(e,s){super(e,"string","PgSparseVector"),this.config.dimensions=s.dimensions}build(e){return new Oi(e,this.config)}}n($i,Xr,"PgSparseVectorBuilder");var Rr,Wr;class Oi extends(Wr=m,Rr=i,Wr){constructor(){super(...arguments);n(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}n(Oi,Rr,"PgSparseVector");function Ga(t,e){const{name:s,config:r}=I(t,e);return new $i(s,r)}var Jr,Hr;class Gi extends(Hr=p,Jr=i,Hr){constructor(e,s){super(e,"array","PgVector"),this.config.dimensions=s.dimensions}build(e){return new Xi(e,this.config)}}n(Gi,Jr,"PgVectorBuilder");var Yr,Zr;class Xi extends(Zr=m,Yr=i,Zr){constructor(){super(...arguments);n(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(s){return JSON.stringify(s)}mapFromDriverValue(s){return s.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}n(Xi,Yr,"PgVector");function Xa(t,e){const{name:s,config:r}=I(t,e);return new Gi(s,r)}function Ka(){return{bigint:xa,bigserial:Na,boolean:C,char:Sa,cidr:Pa,customType:Ta,date:wa,doublePrecision:Ia,inet:_a,integer:ja,interval:Ca,json:Da,jsonb:va,line:Aa,macaddr:Fa,macaddr8:Ba,numeric:li,point:Va,geometry:Ma,real:oe,serial:qa,smallint:La,smallserial:Qa,text:d,time:Ua,timestamp:A,uuid:Ea,varchar:N,bit:$a,halfvec:Oa,sparsevec:Ga,vector:Xa}}const le=Symbol.for("drizzle:PgInlineForeignKeys"),Se=Symbol.for("drizzle:EnableRLS");var kr,en,tn,sn,rn;class H extends(rn=j,sn=i,tn=le,en=Se,kr=j.Symbol.ExtraConfigBuilder,rn){constructor(){super(...arguments);n(this,tn,[]);n(this,en,!1);n(this,kr)}}n(H,sn,"PgTable"),n(H,"Symbol",Object.assign({},j.Symbol,{InlineForeignKeys:le,EnableRLS:Se}));function Ra(t,e,s,r,a=t){const l=new H(t,r,a),c=typeof e=="function"?e(Ka()):e,g=Object.fromEntries(Object.entries(c).map(([u,v])=>{const y=v;y.setName(u);const w=y.build(l);return l[le].push(...y.buildForeignKeys(w,l)),[u,w]})),f=Object.fromEntries(Object.entries(c).map(([u,v])=>{const y=v;y.setName(u);const w=y.buildExtraConfigColumn(l);return[u,w]})),b=Object.assign(l,g);return b[j.Symbol.Columns]=g,b[j.Symbol.ExtraConfigColumns]=f,Object.assign(b,{enableRLS:()=>(b[H.Symbol.EnableRLS]=!0,b)})}const F=(t,e,s)=>Ra(t,e,s,void 0),x={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function S(t,e){return e.includes(t.columnType)}function Wa(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const Ja=h.union([h.string(),h.number(),h.boolean(),h.null()]),Ha=h.union([Ja,h.record(h.any()),h.array(h.any())]),Ya=h.custom(t=>t instanceof Buffer);function Ki(t,e){const s=(e==null?void 0:e.zodInstance)??h,r=(e==null?void 0:e.coerce)??{};let a;return Wa(t)&&(a=t.enumValues.length?s.enum(t.enumValues):s.string()),a||(S(t,["PgGeometry","PgPointTuple"])?a=s.tuple([s.number(),s.number()]):S(t,["PgGeometryObject","PgPointObject"])?a=s.object({x:s.number(),y:s.number()}):S(t,["PgHalfVector","PgVector"])?(a=s.array(s.number()),a=t.dimensions?a.length(t.dimensions):a):S(t,["PgLine"])?a=s.tuple([s.number(),s.number(),s.number()]):S(t,["PgLineABC"])?a=s.object({a:s.number(),b:s.number(),c:s.number()}):S(t,["PgArray"])?(a=s.array(Ki(t.baseColumn,s)),a=t.size?a.length(t.size):a):t.dataType==="array"?a=s.array(s.any()):t.dataType==="number"?a=Za(t,s,r):t.dataType==="bigint"?a=ka(t,s,r):t.dataType==="boolean"?a=r===!0||r.boolean?s.coerce.boolean():s.boolean():t.dataType==="date"?a=r===!0||r.date?s.coerce.date():s.date():t.dataType==="string"?a=eo(t,s,r):t.dataType==="json"?a=Ha:t.dataType==="custom"?a=s.any():t.dataType==="buffer"&&(a=Ya)),a||(a=s.any()),a}function Za(t,e,s){let r=t.getSQLType().includes("unsigned"),a,l,c=!1;S(t,["MySqlTinyInt","SingleStoreTinyInt"])?(a=r?0:x.INT8_MIN,l=r?x.INT8_UNSIGNED_MAX:x.INT8_MAX,c=!0):S(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=r?0:x.INT16_MIN,l=r?x.INT16_UNSIGNED_MAX:x.INT16_MAX,c=!0):S(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=r?0:x.INT24_MIN,l=r?x.INT24_UNSIGNED_MAX:x.INT24_MAX,c=S(t,["MySqlMediumInt","SingleStoreMediumInt"])):S(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=r?0:x.INT32_MIN,l=r?x.INT32_UNSIGNED_MAX:x.INT32_MAX,c=!0):S(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=r?0:x.INT48_MIN,l=r?x.INT48_UNSIGNED_MAX:x.INT48_MAX):S(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(r=r||S(t,["MySqlSerial","SingleStoreSerial"]),a=r?0:Number.MIN_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER,c=!0):S(t,["MySqlYear","SingleStoreYear"])?(a=1901,l=2155,c=!0):(a=Number.MIN_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER);let g=s===!0||s!=null&&s.number?e.coerce.number():e.number();return g=g.min(a).max(l),c?g.int():g}function ka(t,e,s){const r=t.getSQLType().includes("unsigned"),a=r?0n:x.INT64_MIN,l=r?x.INT64_UNSIGNED_MAX:x.INT64_MAX;return(s===!0||s!=null&&s.bigint?e.coerce.bigint():e.bigint()).min(a).max(l)}function eo(t,e,s){if(S(t,["PgUUID"]))return e.string().uuid();let r,a,l=!1;S(t,["PgVarchar","SQLiteText"])?r=t.length:S(t,["MySqlVarChar","SingleStoreVarChar"])?r=t.length??x.INT16_UNSIGNED_MAX:S(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?r=x.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?r=x.INT24_UNSIGNED_MAX:t.textType==="text"?r=x.INT16_UNSIGNED_MAX:r=x.INT8_UNSIGNED_MAX),S(t,["PgChar","MySqlChar","SingleStoreChar"])&&(r=t.length,l=!0),S(t,["PgBinaryVector"])&&(a=/^[01]+$/,r=t.dimensions);let c=s===!0||s!=null&&s.string?e.coerce.string():e.string();return c=a?c.regex(a):c,r&&l?c.length(r):r?c.max(r):c}function Ri(t){return fn(t)?ya(t):ba(t)}function Wi(t,e,s,r){const a={};for(const[l,c]of Object.entries(t)){if(!_(c,q)&&!_(c,T)&&!_(c,T.Aliased)&&typeof c=="object"){const v=fn(c)||ha(c)?Ri(c):c;a[l]=Wi(v,e[l]??{},s,r);continue}const g=e[l];if(g!==void 0&&typeof g!="function"){a[l]=g;continue}const f=_(c,q)?c:void 0,b=f?Ki(f,r):h.any(),u=typeof g=="function"?g(b):b;s.never(f)||(a[l]=u,f&&(s.nullable(f)&&(a[l]=a[l].nullable()),s.optional(f)&&(a[l]=a[l].optional())))}return h.object(a)}const to={never:t=>{var e,s;return((e=t==null?void 0:t.generated)==null?void 0:e.type)==="always"||((s=t==null?void 0:t.generatedIdentity)==null?void 0:s.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},Q=(t,e)=>{const s=Ri(t);return Wi(s,{},to)},so=F("users",{id:N("id").primaryKey().default(P`gen_random_uuid()`),email:d("email").notNull().unique(),username:d("username").notNull(),zipCode:N("zip_code",{length:5}),stripeCustomerId:d("stripe_customer_id"),stripeSubscriptionId:d("stripe_subscription_id"),subscriptionPlan:d("subscription_plan").default("free"),createdAt:A("created_at").notNull().default(P`now()`)}),ro=F("stores",{id:N("id").primaryKey(),name:d("name").notNull(),baseUrl:d("base_url").notNull(),isActive:C("is_active").notNull().default(!0)}),no=F("scans",{id:N("id").primaryKey().default(P`gen_random_uuid()`),userId:N("user_id").notNull(),storeId:N("store_id").notNull(),zipCode:N("zip_code",{length:5}),plan:d("plan").default("free"),productSelection:d("product_selection").notNull(),specificSkus:d("specific_skus").array(),clearanceOnly:C("clearance_only").notNull().default(!1),category:d("category"),priceRange:d("price_range"),minimumDiscountPercent:d("minimum_discount_percent"),minimumDollarsOff:d("minimum_dollars_off"),sortBy:d("sort_by").default("discount-percent"),storeCount:d("store_count").default("1"),status:d("status").notNull().default("pending"),createdAt:A("created_at").notNull().default(P`now()`),completedAt:A("completed_at"),resultCount:d("result_count").default("0"),clearanceCount:d("clearance_count").default("0")}),io=F("scan_results",{id:N("id").primaryKey().default(P`gen_random_uuid()`),scanId:N("scan_id").notNull(),storeId:N("store_id").notNull(),productName:d("product_name").notNull(),sku:d("sku"),productUrl:d("product_url").notNull(),clearancePrice:B("clearance_price",{precision:10,scale:2}),wasPrice:B("was_price",{precision:10,scale:2}),savePercent:d("save_percent"),inStock:d("in_stock"),deliveryAvailable:C("delivery_available"),isOnClearance:C("is_on_clearance").notNull().default(!1),observedAt:A("observed_at").notNull().default(P`now()`),source:d("source").notNull().default("mock"),purchaseInStore:C("purchase_in_store").notNull().default(!1),storeName:d("store_name"),originalPrice:B("original_price",{precision:10,scale:2}),savingsPercent:d("savings_percent"),isPriceSuppressed:C("is_price_suppressed").notNull().default(!1),category:d("category"),storeLocation:d("store_location")}),ao=F("observations",{id:N("id").primaryKey().default(P`gen_random_uuid()`),sku:d("sku"),storeId:N("store_id").notNull(),productUrl:d("product_url").notNull(),clearancePrice:B("clearance_price",{precision:10,scale:2}),wasPrice:B("was_price",{precision:10,scale:2}),savePercent:d("save_percent"),inStock:d("in_stock"),deliveryAvailable:C("delivery_available"),isOnClearance:C("is_on_clearance").notNull().default(!1),observedAt:A("observed_at").notNull().default(P`now()`),source:d("source").notNull().default("alt")});F("cached_products",{id:N("id").primaryKey().default(P`gen_random_uuid()`),sku:d("sku").notNull().unique(),productName:d("product_name").notNull(),category:d("category"),productUrl:d("product_url"),lastScraped:A("last_scraped").notNull().default(P`now()`),currentPrice:B("current_price",{precision:10,scale:2}),isDiscontinued:C("is_discontinued").notNull().default(!1)});F("store_locations",{id:N("id").primaryKey(),storeNumber:d("store_number").notNull(),name:d("name").notNull(),address:d("address").notNull(),city:d("city").notNull(),state:d("state").notNull(),zipCode:d("zip_code").notNull(),phone:d("phone"),latitude:oe("latitude"),longitude:oe("longitude"),storeHours:d("store_hours"),isActive:C("is_active").notNull().default(!0)});F("price_history",{id:N("id").primaryKey().default(P`gen_random_uuid()`),productId:N("product_id").notNull(),storeId:N("store_id").notNull(),price:B("price",{precision:10,scale:2}).notNull(),isOnClearance:C("is_on_clearance").notNull(),recordedAt:A("recorded_at").notNull().default(P`now()`)});F("shopping_list_items",{id:N("id").primaryKey().default(P`gen_random_uuid()`),userId:N("user_id").notNull(),productId:N("product_id").notNull(),storeId:N("store_id").notNull(),aisle:d("aisle"),bay:d("bay"),targetPrice:B("target_price",{precision:10,scale:2}),notes:d("notes"),addedAt:A("added_at").notNull().default(P`now()`),isCompleted:C("is_completed").notNull().default(!1)});const oo=F("contact_submissions",{id:N("id").primaryKey().default(P`gen_random_uuid()`),name:d("name").notNull(),email:d("email").notNull(),subject:d("subject").notNull(),message:d("message").notNull(),status:d("status").notNull().default("new"),createdAt:A("created_at").notNull().default(P`now()`)});Q(so).omit({id:!0,createdAt:!0});Q(ro).omit({id:!0});const lo=Q(no).omit({id:!0,createdAt:!0,completedAt:!0,status:!0,resultCount:!0,clearanceCount:!0,storeCount:!0});Q(io).omit({id:!0});const U=Q(oo).omit({id:!0,createdAt:!0,status:!0});Q(ao).omit({id:!0,observedAt:!0});lo.extend({productSelection:h.enum(["all","specific"]),specificSkus:h.array(h.string()).optional(),minimumDiscountPercent:h.string().optional(),minimumDollarsOff:h.string().optional(),sortBy:h.enum(["discount-percent","stock","dollars-off"]).default("discount-percent")});h.object({userId:h.string(),zipCode:h.string().regex(/^\d{5}$/,"ZIP code must be exactly 5 digits"),plan:h.enum(["free","basic","premium"]).default("free")});h.object({userId:h.string(),zipCode:h.string().regex(/^\d{5}$/,"ZIP code must be exactly 5 digits"),plan:h.enum(["free","basic","premium"]).default("free")});h.object({zipCode:h.string().regex(/^\d{5}$/,"ZIP code must be exactly 5 digits")});function Po(){const{toast:t}=ki(),[e,s]=nn.useState(!1),r=ra({resolver:na(U.extend({name:U.shape.name.min(2,"Name must be at least 2 characters"),email:U.shape.email.email("Please enter a valid email address"),subject:U.shape.subject.min(5,"Subject must be at least 5 characters"),message:U.shape.message.min(10,"Message must be at least 10 characters")})),defaultValues:{name:"",email:"",subject:"",message:""}}),a=aa({mutationFn:async c=>(await sa("POST","/api/contact",c)).json(),onSuccess:()=>{s(!0),r.reset(),t({title:"Message sent!",description:"Thank you for contacting us. We'll get back to you soon."})},onError:c=>{t({title:"Error",description:"Failed to send message. Please try again.",variant:"destructive"}),console.error("Contact form error:",c)}}),l=c=>{a.mutate(c)};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(ea,{}),o.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Contact Us"}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Have a question about DealRadar? Need help with your account? We'd love to hear from you!"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[o.jsxs(Z,{children:[o.jsxs(k,{children:[o.jsxs(ee,{className:"flex items-center gap-2",children:[o.jsx(me,{className:"w-5 h-5"}),"Send us a message"]}),o.jsx(oa,{children:"Fill out the form below and we'll get back to you as soon as possible."})]}),o.jsx(te,{children:e?o.jsxs("div",{className:"text-center py-8 space-y-4",children:[o.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto",children:o.jsx(pe,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),o.jsx("h3",{className:"text-lg font-semibold",children:"Message Sent!"}),o.jsx("p",{className:"text-muted-foreground",children:"Thanks for reaching out. We'll respond to your message within 24 hours."}),o.jsx(de,{onClick:()=>s(!1),variant:"outline","data-testid":"button-send-another",children:"Send Another Message"})]}):o.jsx(ia,{...r,children:o.jsxs("form",{onSubmit:r.handleSubmit(l),className:"space-y-6",children:[o.jsx($,{control:r.control,name:"name",render:({field:c})=>o.jsxs(O,{children:[o.jsx(G,{children:"Name"}),o.jsx(X,{children:o.jsx(se,{placeholder:"Your full name",...c,"data-testid":"input-name"})}),o.jsx(K,{})]})}),o.jsx($,{control:r.control,name:"email",render:({field:c})=>o.jsxs(O,{children:[o.jsx(G,{children:"Email"}),o.jsx(X,{children:o.jsx(se,{type:"email",placeholder:"your.email@example.com",...c,"data-testid":"input-email"})}),o.jsx(K,{})]})}),o.jsx($,{control:r.control,name:"subject",render:({field:c})=>o.jsxs(O,{children:[o.jsx(G,{children:"Subject"}),o.jsx(X,{children:o.jsx(se,{placeholder:"What's your message about?",...c,"data-testid":"input-subject"})}),o.jsx(K,{})]})}),o.jsx($,{control:r.control,name:"message",render:({field:c})=>o.jsxs(O,{children:[o.jsx(G,{children:"Message"}),o.jsx(X,{children:o.jsx(an,{placeholder:"Tell us how we can help you...",className:"min-h-[120px]",...c,"data-testid":"input-message"})}),o.jsx(K,{})]})}),o.jsx(de,{type:"submit",className:"w-full",disabled:a.isPending,"data-testid":"button-submit-contact",children:a.isPending?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Sending..."]}):o.jsxs(o.Fragment,{children:[o.jsx(pe,{className:"w-4 h-4 mr-2"}),"Send Message"]})})]})})})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(Z,{children:[o.jsx(k,{children:o.jsxs(ee,{className:"flex items-center gap-2",children:[o.jsx(ge,{className:"w-5 h-5"}),"Email Funnel Information"]})}),o.jsxs(te,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"font-semibold",children:"Where your emails go:"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"All contact form submissions are automatically sent to our support team at:"}),o.jsx("p",{className:"font-mono text-sm bg-muted px-2 py-1 rounded",children:"support@dealradar.app"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"font-semibold",children:"Response Times:"}),o.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[o.jsx("li",{children:"• General inquiries: Within 24 hours"}),o.jsx("li",{children:"• Technical support: Within 12 hours"}),o.jsx("li",{children:"• Account issues: Within 6 hours"})]})]})]})]}),o.jsxs(Z,{children:[o.jsx(k,{children:o.jsx(ee,{children:"Other Ways to Reach Us"})}),o.jsxs(te,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(ta,{className:"w-5 h-5 mt-0.5 text-muted-foreground"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:"General Support"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"For questions about using DealRadar"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(me,{className:"w-5 h-5 mt-0.5 text-muted-foreground"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:"Feature Requests"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Have an idea to make our tool better? Let us know!"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(la,{className:"w-5 h-5 mt-0.5 text-muted-foreground"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:"Phone Support"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Call us directly for immediate assistance"}),o.jsx("p",{className:"text-sm font-mono text-foreground mt-1",children:"(904) 990-3634"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Mon-Fri 9AM-6PM EST"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(ge,{className:"w-5 h-5 mt-0.5 text-muted-foreground"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:"Business Inquiries"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Partnerships, press, and business opportunities"})]})]})]})]})]})]})]})})]})}export{Po as default};
