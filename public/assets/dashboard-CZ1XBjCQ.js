import{c as g,a as f,j as e,L as c,B as n,C as N,A as v}from"./index-BjO4OBGt.js";import{u as b,C as w}from"./calendar-BSGqHjwE.js";import{C as a,a as x,b as o,c as r}from"./card-DW_tR_lU.js";import{B as h}from"./badge-DEp-JO2V.js";import{M as y}from"./map-pin-uFC9G9SU.js";import{T as j}from"./target-j9Nddwl4.js";import{T as S}from"./trending-up-B40RNYrB.js";import"./utils-km2FGkQ4.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u=g("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);function C(){const{user:s}=f(),{data:l=[]}=b({queryKey:["/api/user/scans"],enabled:!!s}),m={free:{stores:1,name:"Free",color:"bg-gray-500"},basic:{stores:10,name:"Basic",color:"bg-blue-500"},premium:{stores:25,name:"Premium",color:"bg-purple-500"}},d=m[s==null?void 0:s.subscriptionPlan]||m.free,i={totalScans:l.length,clearanceFound:l.reduce((t,p)=>t+parseInt(p.clearanceCount||"0"),0),avgSavings:l.length>0?"24%":"0%",thisMonth:l.filter(t=>new Date(t.createdAt).getMonth()===new Date().getMonth()).length};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a,{children:[e.jsx(x,{children:e.jsxs(o,{className:"flex items-center gap-2",children:["Welcome back, ",s==null?void 0:s.username,"!",e.jsx(h,{className:`${d.color} text-white`,children:d.name})]})}),e.jsx(r,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(y,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your ZIP Code"}),e.jsx("p",{className:"font-semibold",children:(s==null?void 0:s.zipCode)||"Not set"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(j,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Store Coverage"}),e.jsxs("p",{className:"font-semibold",children:[d.stores," stores"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(w,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Member Since"}),e.jsx("p",{className:"font-semibold",children:s!=null&&s.createdAt?new Date(s.createdAt).toLocaleDateString():"N/A"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:i.totalScans}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Scans"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.clearanceFound}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Clearance Items Found"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.avgSavings}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg. Savings"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:i.thisMonth}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This Month"})]})})})]}),e.jsxs(a,{children:[e.jsx(x,{children:e.jsx(o,{children:"Quick Actions"})}),e.jsx(r,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(c,{href:"/",children:e.jsxs(n,{className:"w-full h-20 flex flex-col gap-2","data-testid":"button-quick-scan",children:[e.jsx(j,{className:"w-6 h-6"}),"Start New Scan"]})}),e.jsx(c,{href:"/subscription",children:e.jsxs(n,{variant:"outline",className:"w-full h-20 flex flex-col gap-2","data-testid":"button-upgrade",children:[e.jsx(N,{className:"w-6 h-6"}),"Manage Subscription"]})}),e.jsx(c,{href:"/history",children:e.jsxs(n,{variant:"outline",className:"w-full h-20 flex flex-col gap-2","data-testid":"button-view-history",children:[e.jsx(u,{className:"w-6 h-6"}),"View Scan History"]})})]})})]}),e.jsxs(a,{children:[e.jsx(x,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5"}),"Recent Scans"]})}),e.jsx(r,{children:l.length>0?e.jsx("div",{className:"space-y-3",children:l.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium capitalize",children:t.storeId.replace("-"," ")}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(t.createdAt).toLocaleDateString()," • ",t.resultCount," items • ",t.clearanceCount," on clearance"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{variant:t.status==="completed"?"default":"secondary",children:t.status}),t.status==="completed"&&e.jsx(c,{href:`/scan-results/${t.id}`,children:e.jsx(n,{size:"sm",variant:"outline","data-testid":`button-view-results-${t.id}`,children:"View Results"})})]})]},t.id))}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(u,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No scans yet. Start your first scan to find deals!"}),e.jsx(c,{href:"/",children:e.jsx(n,{className:"mt-4","data-testid":"button-start-first-scan",children:"Start Your First Scan"})})]})})]})]})}function B(){return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(v,{}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx(C,{})})]})}export{B as default};
